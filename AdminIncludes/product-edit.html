{*include file="Degressif/tab-module.html" viewName='product' altViewName='products'*}

<div class="row">
    <div class="col-md-12 general-block-decorator">
        <p class="title">
            {intl l="Remises Quantitatives" d="degressif.ai"}
        </p>
        <div class="row">
            <div class="col-md-12 title-without-tabs">

            </div>
        </div>

        <div class="form-container">
            <div class="row">
                <div class="col-md-12">
                    <table id="degressif" class="table table-striped table-condensed table-left-aligned">
                        <thead>
                        <tr>
                            <th class="col-md-3">{intl l="Tranche Min" d="degressif.bo.default"}</th>
                            <th class="col-md-3">{intl l="Tranche Max" d="degressif.bo.default"}</th>
                            <th class="col-md-3">{intl l="Prix" d="degressif.bo.default"}</th>
                            <th class="col-md-">{intl l="Prix Promo" d="degressif.bo.default"}</th>
                            <th class="col-md-1">{intl l="Actions" d="degressif.bo.default"}</th>
                        </tr>
                        </thead>
                        <tbody>
                        {loop type='degressif' name='degressif' product_id=$product_id}

                            <tr class="js-slice" data-ref="{$REF}" data-product_id="{$product_id}" data-id="{$ID}">
                                <td>
                                    <input type="text" data-field="tranchemin" class="form-control js-slice-tranchemin" value="{$TRANCHEMIN}" data-old="99999">
                                </td>
                                <td>
                                    <input type="text" data-field="tranchemax" class="form-control js-slice-tranchemax" value="{$TRANCHEMAX}" data-old="99999">
                                </td>
                                <td>
                                    <input type="text" data-field="prix" class="form-control js-slice-prix" value="{$PRIX}" data-old="{$PRIX}">
                                </td>
                                <td>
                                    <input type="text" data-field="prix2" class="form-control js-slice-prix2" value="{$PRIX2}" data-old="{$PRIX2}">
                                </td>
                                <td class="actions" style="text-align:center">
                                    <a class="btn btn-default btn-info btn-xs js-slice-save" title="{intl l="Enregistrer" d="degressif.bo.default"}" data-id="{$ID}">
                                        <i class="glyphicon glyphicon-floppy-disk"></i></a>
                                    <a class="btn btn-default btn-danger btn-xs js-slice-delete" title="{intl l="Supprimer" d="degressif.bo.default"}" data-id="{$ID}">
                                        <i class="glyphicon glyphicon-trash"></i></a>
                                </td>
                            </tr>
                        {/loop}
                        <tr class="js-slice-new" data-product_id="{$product_id}" data-ref="{$REF}">
                            <th class="col-md-3">
                                <input type="text" data-field="tranchemin" class="form-control js-slice-tranchemin" value="">
                            </th>
                            <th class="col-md-3">
                                <input type="text" data-field="tranchemax" class="form-control js-slice-tranchemax" value="">
                            </th>
                            <th class="col-md-5">
                                <input type="text" data-field="prix" class="form-control js-slice-prix" value="">
                            </th>
                            <th class="col-md-5">
                                <input type="text" data-field="prix2" class="form-control js-slice-prix2" value="">
                            </th>
                            <th class="col-md-1">
                                <button type="submit" class="btn btn-primary js-slice-add" >{intl l="Ajouter" d="degressif.bo.default"}</button>
                            </th>
                        </tr>
                        </tbody>
                    </table>

                    <div class="message"></div>

                </div>
            </div>
        </div>
    </div>
</div>


{include
file = "includes/generic-warning-dialog.html"

dialog_id       = "wprog_dialog"
dialog_title    = {intl d='wprog.bo.default' l="Message"}
dialog_body     = ""
}


{* JS Templates *}
<script id="tpl-slice" type="text/html">
    <tr class="js-slice" data-product_id="<%=product_id %>" data-id="<%=id %>">
        <td>
            <input type="text" data-field="tranchemin" class="form-control js-slice-tranchemin" value="<%=tranchemin%>" data-old="<%=tranchemin%>">
        </td>
        <td>
            <input type="text" data-field="tranchemax" class="form-control js-slice-tranchemax" value="<%=tranchemax%>" data-old="<%=tranchemax%>">
        </td>
        <td>
            <input type="text" data-field="prix" class="form-control js-slice-prix" value="<%=prix%>" data-old="<%=prix%>">
        </td>
        <td>
            <input type="text" data-field="prix2" class="form-control js-slice-prix2" value="<%=prix2%>" data-old="<%=prix2%>">
        </td>
        <td class="actions" style="text-align:center">
            <a class="btn btn-default btn-info btn-xs js-slice-save" title="{intl d='customdelivery.bo.default' l='Save this price slice'}" data-id="<%=id%>">
                <i class="glyphicon glyphicon-floppy-disk"></i></a>
            <a class="btn btn-default btn-danger btn-xs js-slice-delete" title="{intl d='customdelivery.bo.default' l='Delete this price slice'}" data-id="<%=id%>">
                <i class="glyphicon glyphicon-trash"></i></a>
        </td>
    </tr>
</script>
